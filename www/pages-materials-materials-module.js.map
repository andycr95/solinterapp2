{"version":3,"sources":["webpack:///./src/app/pages/materials/materials.module.ts","webpack:///./src/app/pages/materials/materials.page.html","webpack:///./src/app/pages/materials/materials.page.scss","webpack:///./src/app/pages/materials/materials.page.ts"],"names":[],"mappings":"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","file":"pages-materials-materials-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule,ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MaterialsPage } from './materials.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MaterialsPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [MaterialsPage]\n})\nexport class MaterialsPageModule {}\n","module.exports = \"<ion-header>\\n    <ion-toolbar color=\\\"primary\\\">\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button defaultHref=\\\"/schedulesvisits\\\"></ion-back-button>\\n        </ion-buttons>\\n\\n        <ion-searchbar mode=\\\"ios\\\" show-cancel-button=\\\"true\\\" cancel-button-text=\\\"Cancelar\\\" (ionChange)=\\\"onSearch($event)\\\" autocomplete=\\\"off\\\" autocorrect=\\\"on\\\" animated=\\\"true\\\" spellcheck=\\\"true\\\" type=\\\"text\\\" ionBlur=\\\"\\\" color=\\\"ligth\\\" placeholder=\\\"Buscar Materiales\\\">\\n        </ion-searchbar>\\n        <ion-buttons slot=\\\"end\\\">\\n            <ion-fab-button color=\\\"light\\\" (click)=\\\"addMaterial()\\\">\\n                <ion-icon name=\\\"add\\\" color=\\\"primary\\\"></ion-icon>\\n            </ion-fab-button>\\n        </ion-buttons>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<div class=\\\"bodycontent\\\">\\n    <div *ngIf=\\\"showListMaterials;\\\">\\n        <ion-infinite-scroll threshold=\\\"100px\\\">\\n            <ion-infinite-scroll-content>\\n                <ion-card class=\\\"card-schedules\\\" *ngFor=\\\"let mat of listAllMaterials\\\">\\n                    <ion-card-header>\\n                        <ion-card-title>Material: {{ mat.name }} </ion-card-title>\\n                        <ion-card-title>Precio: {{ mat.price | currency:'$' }}</ion-card-title>\\n                    </ion-card-header>\\n                    <ion-card-content>\\n                        <div style=\\\"float:right\\\">\\n                            <ion-chip>\\n                                <ion-icon mode=\\\"ios\\\" (click)=\\\"editMaterial(mat)\\\" name=\\\"create\\\" color=\\\"primary\\\" class=\\\"icon-circle-small-e\\\"></ion-icon>\\n                                <ion-icon mode=\\\"ios\\\" (click)=\\\"confirm(mat.idmaterial)\\\" name=\\\"trash\\\" color=\\\"primary\\\" class=\\\"icon-circle-small-d\\\"></ion-icon>\\n                            </ion-chip>\\n                        </div>\\n                    </ion-card-content>\\n                </ion-card>\\n            </ion-infinite-scroll-content>\\n        </ion-infinite-scroll>\\n    </div>\\n    <h4 *ngIf=\\\"showFormMaterial\\\" style=\\\"margin-top: 250px;margin-left: 20px;margin-right: 20px;\\\">\\n        Esta seccion es para subir el archivo de registro para materiales.\\n    </h4>\\n    <ion-button *ngIf=\\\"showFormMaterial\\\" class=\\\"btnsub\\\" (click)=\\\"upload()\\\" color=\\\"warning\\\" expand=\\\"block\\\" fill=\\\"solid\\\">\\n        <ion-label class=\\\"colorText\\\">Subir archivo</ion-label>\\n    </ion-button>\\n    <div *ngIf=\\\"Smessage\\\" style=\\\"margin-top: 250px;text-align: center;\\\">\\n        {{message}}\\n    </div>\\n    <form *ngIf=\\\"showForm2;\\\" [formGroup]=\\\"registerMaterialForm\\\" (ngSubmit)=\\\"registerMaterial()\\\">\\n        <ion-item class=\\\"item\\\">\\n            <ion-icon name=\\\"paper\\\" color=\\\"primary\\\" mode=\\\"ios\\\"></ion-icon>\\n            <ion-label>Nombre</ion-label>\\n            <ion-input formControlName=\\\"name\\\" autocomplete=\\\"off\\\" type=\\\"text\\\"></ion-input>\\n            <input type=\\\"hidden\\\" formControlName=\\\"id\\\">\\n        </ion-item>\\n\\n        <ion-item class=\\\"item\\\">\\n            <ion-icon name=\\\"logo-usd\\\" color=\\\"primary\\\" mode=\\\"ios\\\"></ion-icon>\\n            <ion-label>Precio</ion-label>\\n            <ion-input formControlName=\\\"price\\\" autocomplete=\\\"off\\\" type=\\\"text\\\"></ion-input>\\n        </ion-item>\\n\\n        <div class=\\\"seperar\\\">\\n            <ion-item mode=\\\"ios\\\" class='item'>\\n                <ion-button style=\\\"margin-left:110px;\\\" shape=\\\"round\\\" mode=\\\"ios\\\" color=\\\"light\\\" type=\\\"submit\\\">\\n                    <ion-label class=\\\"textcapitalize\\\" style=\\\"color:#0d4690\\\">Registrar</ion-label>\\n                    <ion-icon style=\\\"margin-left:100px\\\" name=\\\"send\\\" mode=\\\"ios\\\" color=\\\"primary\\\"></ion-icon>\\n                </ion-button>\\n            </ion-item>\\n        </div>\\n\\n    </form>\\n</div>\\n<ion-footer *ngIf=\\\"showFormMaterial\\\">\\n    <ion-button (click)=\\\"SendUri()\\\" color=\\\"primary\\\" expand=\\\"block\\\" fill=\\\"solid\\\">\\n        <ion-label class=\\\"colorText\\\">Aceptar</ion-label>\\n    </ion-button>\\n</ion-footer>\"","module.exports = \".card-schedules {\\n  border-radius: 5px;\\n  border-left-style: solid;\\n  border-left-color: #e0e0e0;\\n  border-left-width: thick;\\n  background: white; }\\n\\n.item {\\n  --border-radius:30px;\\n  padding: 5%; }\\n\\n.btnsub {\\n  margin-top: 50px;\\n  margin-left: 10px;\\n  margin-right: 10px; }\\n\\n.bodycontent {\\n  background: white;\\n  background-repeat: no-repeat;\\n  height: 100%;\\n  width: 100%;\\n  overflow: auto; }\\n\\n.size {\\n  zoom: 1.5; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbmR5Y2FpY2Vkby9Eb2N1bWVudHMvc29saW50ZXJhcHAvc3JjL2FwcC9wYWdlcy9tYXRlcmlhbHMvbWF0ZXJpYWxzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVJLGtCQUFrQjtFQUNsQix3QkFBd0I7RUFDeEIsMEJBQTBCO0VBQzFCLHdCQUF3QjtFQUN4QixpQkFBaUIsRUFBQTs7QUFHckI7RUFFRSxvQkFBZ0I7RUFDaEIsV0FBVyxFQUFBOztBQUdiO0VBQ0UsZ0JBQWdCO0VBQ2hCLGlCQUFpQjtFQUNqQixrQkFDRixFQUFBOztBQUVBO0VBRUcsaUJBQWlCO0VBQ2pCLDRCQUE0QjtFQUM1QixZQUFZO0VBQ1osV0FBVztFQUNYLGNBQWMsRUFBQTs7QUFHakI7RUFFQyxTQUFTLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9tYXRlcmlhbHMvbWF0ZXJpYWxzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jYXJkLXNjaGVkdWxlc1xue1xuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICBib3JkZXItbGVmdC1zdHlsZTogc29saWQ7XG4gICAgYm9yZGVyLWxlZnQtY29sb3I6ICNlMGUwZTA7XG4gICAgYm9yZGVyLWxlZnQtd2lkdGg6IHRoaWNrO1xuICAgIGJhY2tncm91bmQ6IHdoaXRlO1xufVxuXG4uaXRlbVxue1xuICAtLWJvcmRlci1yYWRpdXM6MzBweDtcbiAgcGFkZGluZzogNSU7XG59XG5cbi5idG5zdWJ7XG4gIG1hcmdpbi10b3A6IDUwcHg7XG4gIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICBtYXJnaW4tcmlnaHQ6IDEwcHhcbn1cblxuLmJvZHljb250ZW50XG57XG4gICBiYWNrZ3JvdW5kOiB3aGl0ZTsgXG4gICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICAgaGVpZ2h0OiAxMDAlO1xuICAgd2lkdGg6IDEwMCU7XG4gICBvdmVyZmxvdzogYXV0bztcbn1cblxuLnNpemVcbntcbiB6b29tOiAxLjU7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { IonInfiniteScroll } from '@ionic/angular';\nimport { MaterialsService } from '../../services/materials.service';\nimport { CategoryService } from '../../services/category.service';\nimport { FileChooser } from '@ionic-native/file-chooser/ngx';\nimport { File } from '@ionic-native/file/ngx';\nimport { FileTransfer, FileUploadOptions, FileTransferObject } from '@ionic-native/file-transfer/ngx';\nimport { FormGroup, FormBuilder, AbstractControl, Validators } from '@angular/forms';\nimport { ConfigService } from '../../services/config-service';\nimport { UploadService } from '../../services/upload.service';\nimport { AlertController } from '@ionic/angular';\n@Component({\n  selector: 'app-materials',\n  templateUrl: './materials.page.html',\n  styleUrls: ['./materials.page.scss'],\n})\nexport class MaterialsPage implements OnInit {\n\n  public showSpinner = false\n  public showListMaterials = false\n  public showFormMaterial = false\n  public showForm2 = false\n  public listAllMaterials: any\n  public listAllCategories: any\n  public registerMaterialForm: FormGroup\n  public btnRegister = false\n  public btnUpdate = false\n  public Smessage = false;\n  public message: String;\n\n  public id: AbstractControl\n  public name: AbstractControl\n  public price: AbstractControl\n\n\n\n  constructor(public alertController: AlertController, private uploadS: UploadService, private fileChooser: FileChooser,\n    private config: ConfigService, private transfer: FileTransfer, private file: File,\n    private materialservices: MaterialsService, private categoryservices: CategoryService,\n    private formBuilder: FormBuilder) {\n    {\n      this.registerMaterialForm = this.formBuilder.group({\n        id: [''],\n        name: ['', Validators.required],\n        price: ['', Validators.required]\n      })\n      this.name = this.registerMaterialForm.controls['name']\n      this.id = this.registerMaterialForm.controls['id']\n      this.price = this.registerMaterialForm.controls['price']\n    }\n  }\n\n  ngOnInit() {\n    this.listMaterial()\n    this.getCategory()\n  }\n  listMaterial() {\n    this.showSpinner = true\n    this.materialservices.getMaterials().subscribe((res: any) => {\n      if (res.length > 0) {\n        this.showListMaterials = true\n        this.listAllMaterials = res\n        this.showSpinner = false\n      } else {\n        this.showSpinner = false\n        this.Smessage = true\n        this.message = 'No hay materiales registrados'\n      }\n    })\n  }\n  registerMaterial() {\n    this.showSpinner = true\n    if (this.registerMaterialForm.value.id) {\n      this.materialservices.putMaterial(this.registerMaterialForm.value)\n        .subscribe((res: any) => {\n          this.listMaterial()\n          this.showListMaterials = true\n          this.showFormMaterial = false\n          this.showSpinner = false\n        })\n    }\n    else {\n      this.createMaterial(this.registerMaterialForm.value)\n    }\n  }\n  getCategory() {\n    const type = 1\n    this.categoryservices.getCategoriesM(type).subscribe((res: any) => {\n      this.listAllCategories = res\n    })\n  }\n  createMaterial(data: any) {\n    this.materialservices.registerMaterials(data)\n      .subscribe((res: any) => {\n        this.listMaterial()\n\n        this.showListMaterials = true\n        this.showFormMaterial = false\n        this.showSpinner = false\n      })\n  }\n  upload() {\n    this.fileChooser.open()\n      .then(uri => {\n        this.file.resolveLocalFilesystemUrl(uri).then((res: any) => {\n          this.upload2(res)\n        })\n      }).catch(e => {\n        console.log(e)\n      });\n  }\n  async presentAlert(data: any) {\n    const alert = await this.alertController.create({\n      header: 'Alert',\n      message: data,\n      buttons: ['OK']\n    });\n\n    await alert.present();\n  }\n  upload2(data: any) {\n    const fileTransfer: FileTransferObject = this.transfer.create();\n    let options: FileUploadOptions = {\n      fileKey: 'file',\n      fileName: data.name,\n      headers: {}\n    }\n    fileTransfer.upload(data.nativeURL, this.config.getConfig().bussinesServer.url + \"/upload\", options)\n      .then((res) => {\n        this.registerMaterialForm.setValue({\n          id: '',\n          name: res.response,\n          price: 'sig_materials'\n        })\n      }, (err) => {\n        console.error(err);\n      })\n  }\n  SendUri() {\n    this.uploadS.SendUri(this.registerMaterialForm.value).subscribe((res: any) => {\n      this.presentAlert(res.status)\n    })\n  }\n  addMaterial() {\n    this.resetForm(this.registerMaterialForm)\n    this.btnRegister = true\n    if (this.showFormMaterial === false) {\n      this.showListMaterials = false\n      this.showFormMaterial = true\n      this.btnUpdate = false\n    }\n    else {\n      this.showListMaterials = true\n      this.showFormMaterial = false\n    }\n  }\n  resetForm(form: any) {\n    if (form) {\n      form.reset()\n    }\n  }\n  editMaterial(material: any) {\n    this.showSpinner = true\n    this.showListMaterials = false\n    this.showForm2 = true\n    this.registerMaterialForm.setValue({\n      id: material.idmaterial,\n      name: material.name,\n      price: material.price\n    })\n    this.showSpinner = false\n    this.btnUpdate = true\n    this.btnRegister = false\n  }\n  async confirm(material) {\n    const alert = await this.alertController.create({\n      header: 'Está seguro de eliminar?',\n      buttons: [\n        {\n          text: 'No',\n          role: 'cancel',\n          cssClass: 'primary',\n          handler: (blah) => { }\n        }, {\n          text: 'Si',\n          handler: () => {\n            this.delete(material)\n          }\n        }\n      ]\n    })\n    await alert.present();\n  }\n  delete(material: any) {\n    this.showSpinner = true\n    this.materialservices.deleteMaterial(material).subscribe((res: any) => {\n      this.listMaterial()\n      if (res.status) {\n        this.showSpinner = false\n      }\n    })\n  }\n  onSearch(event: any) {\n    this.showSpinner = true\n    this.showFormMaterial = false\n    this.showListMaterials = true\n\n\n\n    const data = {\n      name: event.target.value\n    }\n    this.materialservices.searchsMaterials(data)\n      .subscribe((res: any) => {\n        if (res.status == true) {\n          if (res.materials.length > 0) {\n            this.listAllMaterials = res.materials\n            this.showSpinner = false\n          }\n          else {\n            /*this.presentToast(this.config.getMessage().searchsClient.message)\n            this.showSpinner = false*/\n          }\n        }\n      })\n\n  }\n}\n"],"sourceRoot":""}